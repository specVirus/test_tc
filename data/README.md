Базовый шаблон приложения на Yii2
===============================

Данный шаблон создан на базе https://github.com/yiisoft/yii2-app-advanced

Предназначается для разработки веб-сервисов(точка входа api) и классических веб-приложений(точка входа site)

В шаблон ориентирован на работу на следующем стеке:
* Php7
* Nginx
* PostgreSQL
* Redis
* RabbitMQ
* Docker + Swarm

Документация по Docker - см. docker/README.md
Информация по сборке проекта - см. Makefile

Схема запуска приложения:
1. Поместить в директорию docker/db том с базой данных(при наличии тома)
2. Выполнить docker/init.sh
3. Если на шаге 1, не было выполнено добавление тома, то нужно подключиться к postgres (127.0.0.1:5433&user=postgres&password=root)
и создать базы данных: yii2_iway_template и yii2_iway_template_test
4. Подключиться к контейнеру php(iway-php) и выполнить make build-local
5. В результате:
 * site.yii2-iway-template.local - точка входа site
 * api.yii2-iway-template.local - точка входа api
 * artifacts.yii2-iway-template.local - различные отчеты и метрики

DIRECTORY STRUCTURE
-------------------

```
common                   директория для общих/базовых частей приложения
    config/              содержит общую конфигурацию для всего приложения
    mail/                содержит view-файлы для рендеринга email сообщений
    models/              содержит модели
    tests/               содержит тесты для базовых классов
console                  директория для консольной части приложения
    config/              содержит конфигурацию для консольного режима
    controllers/         содержит консольные контроллеры(команды)
    migrations/          содержит миграции базы данных
    models/              содержит специфичные для консольной части приложения модели
    runtime/             директория для файлов периода исполнения
api                      директория для частей приложения входящих состав веб-сервиса
    config/              содержит конфигурацию для точки входа api
    controllers/         содержит котроллеры для точки входа api
    models/              содержит специфичные для api модели
    runtime/             директория для файлов периода исполнения
    tests/               содержит тесты для api и его компонентов
    web/                 содержит точку входа в приложение и другие веб-ресурсы
site                     директория для классического веб-интерфейса
    assets/              содержит динамически подключаемые JavaScript и CSS-ресурсы
    config/              содержит конфигурацию для веб-интерфейса
    controllers/         содержит контролеры специфичные для веб-интерфейса
    models/              содержит модели специфичные для веб-интерфейса
    runtime/             директория для файлов периода исполнения
    tests/               содержит тесты для веб-интерфейса и его компонентов
    views/               содержит вьюшки специфичные для веб-интерфейса
    web/                 содержит точку входа и другие веб-ресурсы
    widgets/             содержит виджеты
vendor/                  содержит сторонние зависимости
environments/            содержит специфичные для окружения конфиг файлы(НЕ ЗАБЫВАЙТЕ ОБНОВЛЯТЬ!)
```

Создание своего приложения на базе шаблона
------------------------------------------

* Сделать замену yii2-iway-template, yii2_iway_template по коду
* Удалить в корне проекта директорию .git
* Инициализировать репозиторий заново,
 сделать первый коммит, добавить в качестве remote репозиторий для нового приложения и запушить в этот ремоут
